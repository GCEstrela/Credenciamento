@model IMOD.CredenciamentoWeb.ViewModel.UsuarioProfileViewModel
@{

    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header"></h1>
    </div>
    <!-- /.col-lg-12 -->
</div>
<!-- /.row -->

<div class="row">
    <div class="col-lg-12">

        <div class="panel panel-default">
            <div class="panel-heading" style="font-family: 'Francois One', sans-serif;">
                Minha conta
            </div>
            @using (Ajax.BeginForm("EditarConta", "Usuario", new AjaxOptions
            {
                HttpMethod = "POST",
                OnSuccess = "sucesso",
                OnFailure = "falha"
            }, new {id = "form"}))
            {
                @Html.AntiForgeryToken()
                <div class="panel-body">

                    @Html.HiddenFor(n => n.Perfil)
                    @Html.HiddenFor(n => n.IdUser)
                    <div class="row">
                        <div class="col-md-6 col-lg-6">
                            <div class="form-group">
                                <label>Usuário</label>
                                @Html.EditorFor(n => n.Nome, new {htmlAttributes = new {@class = "form-control", maxlength = "50", required = "required"}})
                            </div>
                            <div class="form-group">
                                <label>Senha</label>
                                @Html.EditorFor(n => n.Senha, new {htmlAttributes = new {@class = "form-control", type = "password", maxlength = "50", required = "required"}})
                            </div>
                            <div class="form-group">
                                <label>E-mail</label>
                                <h4>@Model.Email</h4>
                            </div>

                        </div>

                        <div class="col-md-6 col-lg-6">
                            <div class="form-group">
                                <label>Endereço</label>
                                @Html.EditorFor(n => n.Endereco, new {htmlAttributes = new {@class = "form-control", maxlength = "50", required = "required"}})
                            </div>
                            <div class="form-group">
                                <label>CEP</label>
                                @Html.EditorFor(n => n.Cep, new {htmlAttributes = new {@class = "form-control", maxlength = "8"}})
                            </div>
                            <button type="submit" class="btn btn-outline btn-primary">Salvar</button>

                        </div>


                    </div>

                </div>
            }
        </div>
    </div>
</div>


@section scripts
{


    <script type="text/javascript">

        function sucesso(data) {
            ExibirNotificacaoSucesso('Dados editados com sucesso');
        };


        function falha(data) {
            var msg = data.responseText;
            //var msg2 = $('messageError').text();//$(msg).find('messageError').text();
            var msg2 = $(msg).find('#messageError').text();
            ExibirNotificacaoErro('Um erro ocorreu ao executar ação.<br>' + msg2);

        };

    </script>

}

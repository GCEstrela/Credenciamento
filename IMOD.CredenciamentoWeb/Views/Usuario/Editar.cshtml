@model IMOD.CredenciamentoWeb.ViewModel.UsuarioViewModel
@{

    Layout = null;
    //Modal
}

<div class="modal fade" id="modal-page" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background: #2c3e50; color: #ffffff">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel" style="font-family: 'Francois One', sans-serif;">Editar</h4>
            </div>
            @using (Ajax.BeginForm("Editar", "Usuario", new AjaxOptions
            {
                HttpMethod = "POST",
                OnSuccess = "sucesso",
                OnFailure = "falha"
            }, new { id = "form" }))
            {
                @Html.AntiForgeryToken()

                <div class="modal-body">
                    @Html.HiddenFor(n => n.Perfil)
                    @Html.HiddenFor(n => n.IdUser)
                    <div class="row">
                        <div class="col-md-6 col-lg-6">
                            <div class="form-group">
                                <label>Usuário</label>
                                @Html.EditorFor(n => n.Nome, new {htmlAttributes = new {@class = "form-control", maxlength = "50", required = "required"}})
                            </div>
                            <div class="form-group">
                                <label>Senha</label>
                                @Html.EditorFor(n => n.Senha, new {htmlAttributes = new {@class = "form-control", type = "password", maxlength = "50", required = "required"}})
                            </div>
                            <div class="form-group">
                                <label>E-mail</label>
                                @Html.EditorFor(n => n.Email, new {htmlAttributes = new {@class = "form-control", maxlength = "50", required = "required"}})
                            </div>
                        </div>

                        <div class="col-md-6 col-lg-6">
                            <div class="form-group">
                                <label>Endereço</label>
                                @Html.EditorFor(n => n.Endereco, new { htmlAttributes = new { @class = "form-control", maxlength = "50", required = "required" } })
                            </div>
                            <div class="form-group">
                                <label>CEP</label>
                                @Html.EditorFor(n => n.Cep, new { htmlAttributes = new { @class = "form-control", maxlength = "8" } })
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            }
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<script type="text/javascript">

 function sucesso() {
   ExibirNotificacaoSucesso('Dados editados com sucesso');
 };


 function falha(data) {
     var msg = data.responseText;
     //var msg2 = $('messageError').text();//$(msg).find('messageError').text();
     var msg2 = $(msg).find('#messageError').text();
     ExibirNotificacaoErro('Um erro ocorreu ao executar ação.<br>' + msg2);

 };

</script>
@using DSBR.CrossCutting
@model ICollection<DSBR.ServicesWeb.ViewModel.DadosLicencaViewModel>
 @{

     Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header"></h1>
    </div>
    <!-- /.col-lg-12 -->
</div>

<div class="row">
    <div class="col-lg-12">

        <div class="panel panel-default">
            <div class="panel-heading" style="font-family: 'Francois One', sans-serif;">
                Minhas Licenças
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <div class="dataTable_wrapper">
                    <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                        <thead>
                            <tr>
                                <th>Id</th>
                                <th>LicenciadoPara</th>
                                <th>HardwareInfo</th>
                                <th>Dat.Expira</th>
                                <th>Cnpj</th>
                                <td></td>
                            </tr>
                        </thead>
                        <tbody>

                            @{
                                if (Model != null)
                                {

                                    foreach (var item in Model)
                                    {
                                        <tr class="odd gradeX">
                                            <td>@item.IdLicenca</td>
                                            <td>@item.LicenciadoPara</td>
                                            <td>@item.HardwareInfo</td>
                                            <td class="center">@item.DataExpira.ToShortDateString()</td>
                                            <td>@item.Cnpj</td>
                                            <td class="center">
                                                @*Link com Ajax*@
                                                @{ var id = Utils.EncryptAes(@item.IdLicenca.ToString()); }
                                                @Ajax.ActionLink("Visualizar", "Visualizar", "Licenca",
                                                        new { idLic = id }
                                                        ,
                                                        new AjaxOptions
                                                        {
                                                            HttpMethod = "GET",
                                                            UpdateTargetId = "dialog-modal",
                                                            InsertionMode = InsertionMode.Replace,
                                                            OnSuccess = "onShowModal('modal-page')"
                                                        }, new { @class = "btn btn-success btn-xs" })

                                                @*Link com Ajax*@

                                                @Html.ActionLink("Download", "Download", "Licenca", new { idLic = id }, new { @class = "btn btn-default btn-xs" })
                                                <span class="fa fa-download"></span>

                                            </td>
                                        </tr>
                                                        }
                                                    }

                            }

                        </tbody>

                    </table>
                </div>

            </div>
            <div id="dialog-modal"></div>

            <!-- /.panel-body -->
        </div>

        <!-- /.panel -->
    </div>
    <!-- /.col-lg-12 -->

</div>
 


@section scripts
{


    <script type="text/javascript">

        function sucesso(data) {
            ExibirNotificacaoSucesso('Dados editados com sucesso');
        };


        function falha(data) {
            var msg = data.responseText;
            //var msg2 = $('messageError').text();//$(msg).find('messageError').text();
            var msg2 = $(msg).find('#messageError').text();
            ExibirNotificacaoErro('Um erro ocorreu ao executar ação.<br>' + msg2);

        };

    </script>

}


